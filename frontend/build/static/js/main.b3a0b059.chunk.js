(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{109:function(e,t,n){},113:function(e,t,n){},115:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(28),r=n.n(s),l=n(14),o=n.n(l),i=n(65),u=n(17),j=n(25),b=n(9),d=(n(72),n(24)),O=n(20),p=n.n(O),h=n(63),x=n.n(h),m=n(18),f=n.n(m),g=n(64),v=(n(109),n(33)),w=n.n(v),S=n(3);var N=function(e){var t=e.setShowRegister,n=Object(c.useState)(!1),a=Object(b.a)(n,2),s=a[0],r=a[1],l=Object(c.useState)(!1),i=Object(b.a)(l,2),j=i[0],d=i[1],O=Object(c.useRef)(),h=Object(c.useRef)(),x=Object(c.useRef)(),m=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:O.current.value,email:h.current.value,password:x.current.value},e.prev=2,e.next=5,f.a.post("/users/register",n);case 5:d(!1),r(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),d(!0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"registerContainer",children:[Object(S.jsxs)("div",{className:"logo",children:[Object(S.jsx)(p.a,{}),"Timeline"]}),Object(S.jsxs)("form",{onSubmit:m,children:[Object(S.jsx)("input",{type:"text",placeholder:"Username",ref:O}),Object(S.jsx)("input",{type:"email",placeholder:"Email",ref:h}),Object(S.jsx)("input",{type:"password",placeholder:"Password",ref:x}),Object(S.jsx)("button",{className:"registerBtn",children:"Register"}),s&&Object(S.jsx)("span",{className:"success",children:"Successfully registered, you can now login."}),j&&Object(S.jsx)("span",{className:"error",children:"Something wrong happened, please try again."})]}),Object(S.jsx)(w.a,{className:"registerCancel",onClick:function(){return t(!1)}})]})};n(113);var y=function(e){var t=e.setShowLogin,n=e.setCurrentUsername,a=e.myStorage,s=Object(c.useState)(!1),r=Object(b.a)(s,2),l=r[0],i=r[1],j=Object(c.useRef)(),d=Object(c.useRef)(),O=function(){var e=Object(u.a)(o.a.mark((function e(c){var s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),s={username:j.current.value,password:d.current.value},e.prev=2,e.next=5,f.a.post("/users/login",s);case 5:r=e.sent,n(r.data.username),a.setItem("user",r.data.username),t(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),i(!0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"loginContainer",children:[Object(S.jsxs)("div",{className:"logo",children:[Object(S.jsx)(p.a,{className:"logoIcon"}),Object(S.jsx)("span",{children:"Timeline"})]}),Object(S.jsxs)("form",{onSubmit:O,children:[Object(S.jsx)("input",{autoFocus:!0,placeholder:"Username",ref:j}),Object(S.jsx)("input",{type:"password",min:"6",placeholder:"Password",ref:d}),Object(S.jsx)("button",{className:"loginBtn",type:"submit",children:"Login"}),l&&Object(S.jsx)("span",{className:"failure",children:"Something went wrong!"})]}),Object(S.jsx)(w.a,{className:"loginCancel",onClick:function(){return t(!1)}})]})};var C=function(){var e=window.localStorage,t=Object(c.useState)(e.getItem("user")),n=Object(b.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)([]),l=Object(b.a)(r,2),O=l[0],h=l[1],m=Object(c.useState)(null),v=Object(b.a)(m,2),w=v[0],C=v[1],k=Object(c.useState)(null),R=Object(b.a)(k,2),I=R[0],A=R[1],L=Object(c.useState)(null),B=Object(b.a)(L,2),z=B[0],T=B[1],E=Object(c.useState)(!1),M=Object(b.a)(E,2),D=M[0],J=M[1],P=Object(c.useState)(!1),U=Object(b.a)(P,2),F=U[0],G=U[1],Q=Object(c.useState)(null),W=Object(b.a)(Q,2),X=W[0],_=W[1],q=Object(c.useState)(0),K=Object(b.a)(q,2),V=K[0],Y=K[1],Z=Object(c.useState)({width:"100vw",height:"100vh",latitude:37.6,longitude:-95.665,zoom:4}),H=Object(b.a)(Z,2),$=H[0],ee=H[1],te=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:a,title:z,desc:X,rating:V,lat:I.lat,long:I.long},e.prev=2,e.next=5,f.a.post("/pins",n);case 5:c=e.sent,h([].concat(Object(i.a)(O),[c.data])),A(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/pins");case 3:t=e.sent,h(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(S.jsx)("div",{className:"App",children:Object(S.jsxs)(d.c,Object(j.a)(Object(j.a)({},$),{},{mapStyle:"mapbox://styles/xcg1234/ckpoby1jx0xt117phqtxc5hhb",mapboxApiAccessToken:"pk.eyJ1IjoieGNnMTIzNCIsImEiOiJja254aXI5MWowcXB0Mm5xejFrdGpuYmZsIn0.bMdgQ-ltdK6tsmwWf1Lw1Q",onViewportChange:function(e){return ee(e)},onDblClick:function(e){var t=Object(b.a)(e.lngLat,2),n=t[0],c=t[1];A({lat:c,long:n})},children:[O.map((function(e){return Object(S.jsxs)("div",{children:[Object(S.jsx)(d.a,{latitude:e.lat,longitude:e.long,offsetLeft:3.5*-$.zoom,offsetTop:7*-$.zoom,children:Object(S.jsx)(p.a,{style:{fontSize:7*$.zoom,color:e.username===a?"tomato":"slateblue",cursor:"pointer"},onClick:function(){return t=e._id,n=e.lat,c=e.long,C(t),void ee(Object(j.a)(Object(j.a)({},$),{},{latitude:n,longitude:c}));var t,n,c}})}),e._id===w&&Object(S.jsx)(d.b,{latitude:e.lat,longitude:e.long,closeButton:!0,closeOnClick:!1,anchor:"left",onClose:function(){C(null)},children:Object(S.jsxs)("div",{className:"card",children:[Object(S.jsx)("label",{children:"Place"}),Object(S.jsx)("h4",{className:"place",children:e.title}),Object(S.jsx)("label",{children:"Review"}),Object(S.jsx)("p",{className:"desc",children:e.desc}),Object(S.jsx)("label",{children:"Rating"}),Object(S.jsx)("div",{className:"stars",children:Array(e.rating).fill(Object(S.jsx)(x.a,{className:"star"}))}),Object(S.jsx)("label",{children:"Info"}),Object(S.jsxs)("span",{className:"username",children:["Created by ",Object(S.jsx)("b",{children:e.username})]}),Object(S.jsx)("span",{className:"date",children:Object(g.a)(e.createdAt)})]})})]},e.createdAt)})),I&&Object(S.jsx)(d.b,{latitude:I.lat,longitude:I.long,closeButton:!0,closeOnClick:!1,anchor:"top",onClose:function(){A(null)},children:Object(S.jsx)("div",{children:Object(S.jsxs)("form",{onSubmit:te,children:[Object(S.jsx)("label",{children:"Title"}),Object(S.jsx)("input",{type:"text",placeholder:"Enter the title",onChange:function(e){return T(e.target.value)}}),Object(S.jsx)("label",{children:"Review"}),Object(S.jsx)("textarea",{placeholder:"Say something about the place.",onChange:function(e){return _(e.target.value)}}),Object(S.jsx)("label",{children:"Rating"}),Object(S.jsxs)("select",{onChange:function(e){return Y(e.target.value)},children:[Object(S.jsx)("option",{value:"1",children:"1"}),Object(S.jsx)("option",{value:"2",children:"2"}),Object(S.jsx)("option",{value:"3",children:"3"}),Object(S.jsx)("option",{value:"4",children:"4"}),Object(S.jsx)("option",{value:"5",children:"5"})]}),Object(S.jsx)("button",{className:"submitButton",type:"submit",children:"Add Pin"})]})})},I.createdAt),a?Object(S.jsx)("button",{className:"button logout",onClick:function(){e.removeItem("user"),s(null)},children:"Log Out"}):Object(S.jsxs)("div",{className:"buttons",children:[Object(S.jsx)("button",{className:"button login",onClick:function(){return G(!0)},children:"Login"}),Object(S.jsx)("button",{className:"button register",onClick:function(){return J(!0)},children:"Register"})]}),D&&Object(S.jsx)(N,{setShowRegister:J}),F&&Object(S.jsx)(y,{setShowLogin:G,myStorage:e,setCurrentUsername:s})]}))})};r.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(C,{})}),document.getElementById("root"))},72:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.b3a0b059.chunk.js.map